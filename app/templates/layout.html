<!doctype html>
<html lang="en" data-theme="dark">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>{{ title or 'College Scholarships & Financial Aid' }}</title>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
	<style>
		/* Theme variables */
		:root{
			--bg:#0b0e14;
			--glass-bg:rgba(255,255,255,0.08);
			--glass-border:rgba(255,255,255,0.18);
			--text:#ffffff;
			--muted:#d0d3da;
			--primary:#8ab4ff;
			--outline:#ffffff59;
		}
		:root[data-theme="light"]{
			--bg:#f5f3ff; /* lavender base */
			--glass-bg:rgba(255,255,255,0.7);
			--glass-border:rgba(0,0,0,0.08);
			--text:#0b0e14;
			--muted:#475569;
			--primary:#7c3aed; /* purple */
			--outline:#00000030;
		}
		html[data-theme="dark"] body { min-height:100vh; background:
			radial-gradient(1200px 800px at -10% -20%, #1b2440 0%, transparent 60%),
			radial-gradient(1000px 600px at 110% 10%, #2a1848 0%, transparent 60%),
			radial-gradient(800px 800px at 30% 120%, #16324f 0%, transparent 60%), var(--bg); color: var(--text); font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
		html[data-theme="light"] body { min-height:100vh; background:
			linear-gradient(180deg, #ffffff 0%, #f3e8ff 35%, #ede9fe 60%, #faf5ff 100%),
			radial-gradient(900px 600px at -10% -10%, #e9d5ff66 0%, transparent 60%),
			radial-gradient(900px 700px at 110% 0%, #c4b5fd66 0%, transparent 60%),
			radial-gradient(700px 700px at 30% 120%, #e879f966 0%, transparent 60%), var(--bg);
			color: var(--text); font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }

		.navbar { background: transparent; border: 0; margin-top:16px; padding-top:0; padding-bottom:0; }
		.brand-pill { display:inline-flex; align-items:center; gap:8px; padding:6px 12px; border-radius:14px; background: var(--glass-bg); border:1px solid var(--glass-border); backdrop-filter: blur(14px) saturate(160%); -webkit-backdrop-filter: blur(14px) saturate(160%); box-shadow: 0 8px 20px rgba(0,0,0,0.18); }
		.brand-title { font-weight: 800; letter-spacing: .2px; margin:0; }

		html[data-theme="light"] .navbar .navbar-brand, html[data-theme="light"] .navbar .nav-link { color: var(--text) !important; }
		html[data-theme="light"] .navbar .nav-link:hover { color: #111827 !important; }

		.container { max-width: 1160px; }

		.card { background: var(--glass-bg); backdrop-filter: blur(18px) saturate(160%); -webkit-backdrop-filter: blur(18px) saturate(160%); border: 1px solid var(--glass-border); border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.20); color: var(--text); }
		.table { color: var(--text); }
		.small, .text-muted { color: var(--muted) !important; }

		.form-control, .form-select { background: rgba(255,255,255,0.06); color: var(--text); border: 1px solid var(--glass-border); border-radius:12px; }
		html[data-theme="light"] .form-control, html[data-theme="light"] .form-select { background: rgba(255,255,255,0.9); }
		.form-control:focus, .form-select:focus { box-shadow: 0 0 0 0.2rem rgba(138,180,255,0.25); border-color:#4b7bec; color:var(--text);} 

		.btn-primary { background: linear-gradient(135deg, #79a8ff 0%, #6d8cff 100%); border: none; box-shadow: 0 8px 20px rgba(109,140,255,0.35); }
		html[data-theme="light"] .btn-primary { background: linear-gradient(135deg, #a78bfa 0%, #7c3aed 100%); }
		.btn-primary:hover { filter: brightness(1.05); }
		.btn-outline-light { border-color: var(--outline); color: var(--text); }
		.btn-outline-light:hover { background: rgba(255,255,255,0.08); }

		.alert { border-radius:14px; background: rgba(255,255,255,0.06); border: 1px solid var(--glass-border); color: var(--text); }
		html[data-theme="light"] .alert { background: rgba(255,255,255,0.9); }

		img { border-radius: 10px; }
		a { color: var(--primary); } a.card { color: inherit; }

		/* Bigger iOS-style theme switch */
		.theme-switch { position: relative; width: 72px; height: 38px; }
		.theme-switch input { display:none; }
		.theme-switch .slider { position:absolute; inset:0; cursor:pointer; border-radius:999px; background: var(--glass-bg); border:1px solid var(--glass-border); backdrop-filter: blur(10px) saturate(160%); -webkit-backdrop-filter: blur(10px) saturate(160%); transition: background 0.2s ease, border-color 0.2s ease; }
		.theme-switch .thumb { position:absolute; top:4px; left:4px; width:30px; height:30px; border-radius:50%; background: linear-gradient(180deg, #fff, #e8e8e8); box-shadow: 0 4px 12px rgba(0,0,0,0.25); transition: transform 0.25s cubic-bezier(.4,0,.2,1); }
		.theme-switch input:checked + .slider .thumb { transform: translateX(34px); }
		.theme-switch .icon { position:absolute; top:9px; width:18px; height:18px; opacity:.9; }
		.theme-switch .icon.sun { left:10px; }
		.theme-switch .icon.moon { right:10px; }

		.footer { color: var(--muted); font-size: 13px; text-align: center; padding: 18px 0 28px; }
	</style>
</head>
<body data-theme="dark">
	<nav class="navbar navbar-expand-lg navbar-dark mb-4">
		<div class="container d-flex align-items-center justify-content-between">
			<a class="navbar-brand" href="/">
				<span class="brand-pill"><span class="brand-title">College Scholarships & Aid</span></span>
			</a>
			<div class="d-flex align-items-center gap-3">
				<ul class="navbar-nav d-none d-lg-flex">
					{% if current_user.is_authenticated and current_user.role == 'admin' %}
						<li class="nav-item"><a class="nav-link" href="/admin/dashboard">Dashboard</a></li>
						<li class="nav-item"><a class="nav-link" href="/admin/scholarships">Scholarships</a></li>
						<li class="nav-item"><a class="nav-link" href="/admin/applications">Applications</a></li>
						<li class="nav-item"><a class="nav-link" href="/admin/finance">Finance</a></li>
					{% endif %}
				</ul>
				<label class="theme-switch ms-2" title="Toggle theme">
					<input id="themeToggle" type="checkbox" />
					<span class="slider">
						<span class="thumb"></span>
						<svg class="icon sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" fill="#fbbf24"/></svg>
						<svg class="icon moon" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="#93c5fd"/></svg>
					</span>
				</label>
				<ul class="navbar-nav ms-2">
					{% if current_user.is_authenticated %}
						<li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
					{% else %}
						<li class="nav-item"><a class="nav-link" href="/login">Login</a></li>
						<li class="nav-item"><a class="nav-link" href="/register">Register</a></li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>
	<div class="container mb-5">
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				<div class="mb-3">
					{% for category, msg in messages %}
						<div class="alert alert-{{ category }}">{{ msg }}</div>
					{% endfor %}
				</div>
			{% endif %}
		{% endwith %}
		{% block content %}{% endblock %}
		<div class="footer">Made by Sarvesh Raam T K and Arun Kumar C</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
	(function(){
		const key = 'theme';
		const html = document.documentElement;
		const body = document.body;
		const toggle = document.getElementById('themeToggle');
		function apply(theme){ html.setAttribute('data-theme', theme); body.setAttribute('data-theme', theme); toggle.checked = theme === 'light'; localStorage.setItem(key, theme); }
		const saved = localStorage.getItem(key) || 'dark'; apply(saved);
		toggle.addEventListener('change', ()=>{ apply(toggle.checked ? 'light' : 'dark'); });
	})();
	</script>
</body>
</html>
